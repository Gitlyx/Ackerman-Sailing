!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t=t||self)["react-animate-props"]={},t.React)}(this,function(t,h){"use strict";var i="default"in h?h.default:h;var e,n,r=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.displayName||t.name||("string"==typeof t&&0<t.length?t:"Unknown")}}(e={exports:{}},e.exports),e.exports),o=(n=r)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function p(t,e,n,r){return e+n*(t/r)}function a(t,e,n,r,i){if(0===r)return e;var o=n(r*i,t,e<t?-(t-e):e-t,r);return e<t?Math.max(e,Math.min(t,o)):Math.max(t,Math.min(e,o))}function u(e){if(e.startValue instanceof Object){var n={};return Object.keys(e.startValue).forEach(function(t){n[t]=a(e.startValue[t],e.endValue[t],e.ease,e.duration,e.progress)}),void(e.value=n)}e.value=a(e.startValue,e.endValue,e.ease,e.duration,e.progress)}function c(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function f(t,e,n,r){return n-bounceEaseOut(r-t,0,n,r)+e}var l=function(){var t={},i={};return t.on=function(t,e){var n={name:t,handler:e};return i[t]=i[t]||[],i[t].unshift(n),n},t.off=function(t){var e=i[t.name].indexOf(t);-1!==e&&i[t.name].splice(e,1)},t.trigger=function(t,e){var n,r=i[t];if(r)for(n=r.length;n--;)r[n].handler(e)},t},d=function(){function t(t){var e=t.start,n=t.end,r=t.duration,i=void 0===r?1e3:r,o=t.ease,a=void 0===o?p:o,s=t.delay,u=void 0===s?0:s,c=new l;this.on=c.on,this.off=c.off,this.trigger=c.trigger,this.value=this.startValue=e,this.endValue=n,this.duration=i,this.ease=a,this.delay=u,this.active=!1,this.complete=!1,this.progress=0,this.endTime=null}var e=t.prototype;return e.start=function(){return this.endTime=Date.now()+this.duration*(1-this.progress),this.trigger("start",{start:this.start,end:this.end,duration:this.duration,progress:this.progress,ease:this.ease,value:this.value}),this.animationFrame=requestAnimationFrame(this.tick.bind(this)),this.active=!0,this.complete=!1,this},e.stop=function(){return this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.progress=this.progress+(this.endTime-Date.now())/this.duration,this.endTime=null,this.active=!1,u(this),this.trigger("stop",{start:this.start,end:this.end,duration:this.duration,progress:this.progress,ease:this.ease,value:this.value}),this},e.tick=function(){this.progress=Math.max(0,Math.min(1,1-(this.endTime-Date.now())/this.duration)),u(this);var t={start:this.startValue,end:this.endValue,duration:this.duration,progress:this.progress,ease:this.ease,value:this.value};if(this.trigger("tick",t),1===this.progress||0===this.duration)return this.active=!1,this.complete=!0,this.trigger("complete",t);this.animationFrame=requestAnimationFrame(this.tick.bind(this))},t}(),v={Back:{In:function(t,e,n,r){return n*(t/=r)*t*(2.70158*t-1.70158)+e},Out:function(t,e,n,r){return n*((t=t/r-1)*t*(2.70158*t+1.70158)+1)+e},InOut:function(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*((1+(i*=1.525))*t-i))+e:n/2*((t-=2)*t*((1+(i*=1.525))*t+i)+2)+e}},Bounce:{In:f,Out:c,InOut:function(t,e,n,r){return t<r/2?.5*f(2*t,0,n,r)+e:.5*c(2*t-r,0,n,r)+.5*n+e}},Circ:{In:function(t,e,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+e},Out:function(t,e,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+e},InOut:function(t,e,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Cubic:{In:function(t,e,n,r){return n*(t/=r)*t*t+e},Out:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e},InOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}},Elastic:{In:function(t,e,n,r){var i=1.70158,o=0,a=n;return 0===t?e:1==(t/=r)?e+n:(o=o||.3*r,i=a<Math.abs(n)?(a=n,o/4):o/(2*Math.PI)*Math.asin(n/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)+e)},Out:function(t,e,n,r){var i=1.70158,o=0,a=n;return 0===t?e:1==(t/=r)?e+n:(o=o||.3*r,i=a<Math.abs(n)?(a=n,o/4):o/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*t)*Math.sin((t*r-i)*(2*Math.PI)/o)+n+e)},InOut:function(t,e,n,r){var i=1.70158,o=0,a=n;return 0===t?e:2==(t/=r/2)?e+n:(o=o||r*(.3*1.5),i=a<Math.abs(n)?(a=n,o/4):o/(2*Math.PI)*Math.asin(n/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*-.5+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-i)*(2*Math.PI)/o)*.5+n+e)}},Expo:{In:function(t,e,n,r){return 0===t?e:n*Math.pow(2,10*(t/r-1))+e},Out:function(t,e,n,r){return t===r?e+n:n*(1-Math.pow(2,-10*t/r))+e},InOut:function(t,e,n,r){return 0===t?e:t===r?e+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e}},Linear:p,Quad:{In:function(t,e,n,r){return n*(t/=r)*t+e},Out:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},InOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}},Quart:{In:function(t,e,n,r){return n*(t/=r)*t*t*t+e},Out:function(t,e,n,r){return-n*((t=t/r-1)*t*t*t-1)+e},InOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}},Quint:{In:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},Out:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},InOut:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}},Sine:{In:function(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e},Out:function(t,e,n,r){return n*Math.sin(t/r*(Math.PI/2))+e},InOut:function(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e}}};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e,n){var r=t.prop,i=t.value,o=t.target,a=t.tweenProps;void 0===e&&(e=function(t,e){}),void 0===n&&(n=function(t,e){});var s=Object.assign({},{duration:1e3,ease:v.Quad.Out},a),u=new d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},s,{start:i,end:o}));return u.on("tick",function(t){e(r,t)}),u.on("complete",function(t){n(r,t)}),u.start(),u}function w(){return(w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var b={delay:0,duration:1e3,ease:v.Quad.Out,onAnimateProgress:function(t){return t},onAnimateComplete:function(t){return t}};t.default=function(r,a){void 0===a&&(a={});var t=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={},n.tweens={},(e=Object.assign({},a,e)).hasOwnProperty("animatedProps")&&"object"==typeof e.animatedProps&&Object.keys(e.animatedProps).forEach(function(t){e.hasOwnProperty(t)&&(n.state[t]=e[t])}),n.onTweenProgress=n.onTweenProgress.bind(P(n)),n.onTweenComplete=n.onTweenComplete.bind(P(n)),n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.componentDidUpdate=function(e,t){var n=this,r=Object.assign({},a,this.props);r.hasOwnProperty("animatedProps")&&Object.keys(r.animatedProps).forEach(function(t){n.props[t]!==e[t]&&n.props[t]!==n.state[t]&&n.tweenProp({prop:t,value:n.state[t],target:n.props[t],tweenProps:r.animatedProps.hasOwnProperty(t)?r.animatedProps[t]:{}})})},n.componentWillUnmount=function(){var e=this;this.tweens&&this.tweens.length&&Object.keys(this.tweens).forEach(function(t){e.tweens[t].stop()})},n.onTweenProgress=function(t,e){var n,r=e.value,i=Object.assign({},a,this.props).onAnimateProgress;i?this.setState(i(t,r)):this.setState(((n={})[t]=r,n))},n.onTweenComplete=function(t,e){var n=this,r=e.value,i=Object.assign({},a,this.props).onAnimateComplete,o=!1;Object.keys(this.tweens).forEach(function(t){n.tweens[t].active&&(o=!0)}),i&&i(t,r,o)},n.tweenProp=function(t){var e=t.prop,n=g({prop:e,value:t.value,target:t.target,tweenProps:t.tweenProps},this.onTweenProgress,this.onTweenComplete);return this.tweens[e]=n},n.render=function(){var t=Object.assign({},a,this.props),e=t.animatedProps?Object.keys(t.animatedProps):[],n=function(t,e){var n=0<arguments.length&&void 0!==t?t:{},r=1<arguments.length&&void 0!==e?e:[];return n=s({},n),r.forEach(function(t){n.hasOwnProperty(t)&&delete n[t]}),n}(this.props,e);return i.createElement(r,w({},n,this.state))},e}(h.Component);return t.displayName="AnimateProps("+o(r)+")",t},t.useAnimateProps=function(t,e){var n,r=h.useState(t),i=r[0],o=r[1],a=Object.assign({},b,e),s=a.delay,u=a.duration,c=a.ease;return h.useEffect(function(){return n&&n.stop(),i!==t&&(n=g({prop:null,value:i,target:t,tweenProps:{delay:s,duration:u,ease:c}},function(t,e){var n=e.value;o(a.onAnimateProgress(n))},function(t,e){var n=e.value;o(a.onAnimateComplete(n))})),function(){n&&n.stop()}},[t]),i},Object.defineProperty(t,"__esModule",{value:!0})});
